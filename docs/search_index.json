[["index.html", "Cursos ASBTEC | Inicia’t a R ", " Cursos ASBTEC | Inicia’t a R Associació de Biotecnòlegs de Catalunya "],["edició.html", "Edició", " Edició Acutalment, el curs Inicia’t a R de l’Associació de Biotecnòlegs de Catalunya es troba en la primera edició. 1a edició [2021]. Responsable(s): Adrià Mitjavila "],["llicència.html", "Llicència", " Llicència This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. "],["pròleg.html", "Pròleg Objectius del curs Continguts del curs", " Pròleg Objectius del curs Aquest curs, íntegrament en català, ha estat dissenyat per membres de l’ASBTEC per al benefici dels socis de l’associació. D’aquesta manera pretenem que els alumnes que el duguin a terme aprenguin a fer servir R des de zero i sense cap coneixement d’informàtica més enllà dels que té l’usuari mig. Els coneixements que es volen impartir estan relacionats amb el funcionament bàsic d’R, la transformació i visualització de dades i, per acabar, com utilitzar R per al tractament de dades biològiques. Els materials proporcionats permetran assolir els objectius pel que fa als coneixements bàsics. Tantmateix, es proporcionaran diversos recursos web i bibliografia que es poden trobar fàcilment amb una cerca ràpida per internet i que poden ajudar als alumnes del curs a aprofundir en l’aprenentatge. Continguts del curs Aquests cursos pretenen donar a conèixer el funcionament bàsic d’R per a poder fer informes, tractar i visualitzad dades, etc. Els coneixements que volem transmetre són: Què són R i RStudio? Comença a utilitzar R i RStudio. Tipus i estructures de dades a R. Bucles for, while i estructures condicionals if/else. Funcions a R: més a fons. Tractament i visualització de dades amb els paquets integrats a R. Tractament i visualització de dades amb els dplyr, ggplot2 i altres paquets. … Més endevant, farem un curs d’anàlisis de dades biològiques amb R. D’altra banda, si a algú li interessa aprendre altres temes relacionats amb R, pot demanar-nos-ho i valorarem la inclusió de nous temes dins d’aquest curs. "],["introducció.html", "Capítol 1 Introducció 1.1 Què és R? 1.2 Què és RStudio? 1.3 Fes-ho tu! 1.4 Recursos per a l’aprenentatge", " Capítol 1 Introducció Aquesta unitat ens servirà d’introducció per a explicar què són R i RStudio, a més de donar una sèrie de passos per a la seva instal·lació. 1.1 Què és R? A diferència d’altres llenguatges com C o Java, R no és un llenguatge inicialment dissenyat per al desenvolupament de programari, encara que també ho permet, sinó que és un llenguatge estadístic dissenyat específicament per tal de dur a terme càlculs estadístics, dissenyar gràfics i realitzar anàlisis de dades. A més a més, R també proporciona l’entorn per a dur a terme totes aquestes computacions. 1.1.1 Per què R? 1.1.1.1 Inconvenients A diferència d’altres programes per a tractar dades estadístiques (ex. SPSS), R no té una interfície gràfica. Això significa que totes les operacions s’han de fer mitjançant ordres o comandes escrites (commands en anglès) mitjançant la consola. Tantmateix, això pot convertir-se en un avantatge ja que, al no tenir interfície gràfica, R és més ràpid en fer les anàlisis i és poc probable que es bloquegi utilitzant grans conjunts de dades, cosa que sí que pot passar amb altres programes. 1.1.1.2 Avantatges Hem escollit R per una sèrie de motius: És gratuït i de codi obert. Això fa que la comunitat a internet sigui molt gran i interactiva, facilitant l’aprenentatge autodidacta. És altament utilitzat en les ciències biològiques, especialment en anàlisi de dades òmiques (transcriptòmica, cistròmica, …), anàlisis de supervivència i tot tipus d’anàlisis que requereixin estadística. Permet tractar grans conjunts de dades de manera ràpida i eficient (molt més que amb Excel), així com visualitzar-los i analitzar-los. A més a més, igual que altres llenguatges, R permet guardar la feina feta en scripts, que no són res més que documents on hi ha tot el codi escrit i que poden ser executats de manera independent a la consola. 1.1.2 Instal·la R Per a instal·lar R al teu sistema operatiu, el més fàcil és anar a la web de la CRAN i descarregar-te els instal·ladors corresponents (veure la Figura 1) en la versió que volgueu. La versió recomanada per al curs és la 3.6.3, però la 4.0.3, que és la més actual, també ens servirà. Figure 1.1: Pàgina inicial de la CRAN (Comprehensive R Archive Network), on pots descarregar els instal·ladors d’R. Per a Windows: Un cop a la pàgina de la CRAN, cliqueu a Download R for Windows. Aquí us demanarà quins instal·ladors us voleu descarregar. Heu de clicar a base. Finalment, podreu descarregar-vos R en la versió més actual que, a dia d’avui, és la versió 4.0.3. Per a descarregar l’instal·lador, cliqueu Download R 4.0.3 for Windows En cas que volgueu una versió diferent, heu de clicar a Previous releases, triar la versió desitjada i seguir els mateixos passos. Una vegada l’instal·lador estigui descarregat, s’ha d’executar i seguir les instruccions. Per a MAC OS X: Un cop a la pàgina de la CRAN, cliqueu a Download R for (Mac) OS X. Aquí us demanarà quina versió voleu instal·lar. A dia d’avui, la més actual és la 4.0.3, però podeu descarregar altres versións que es troben més avall. Cliqueu a l’enllaç per a descarregar la versió que volgueu (ex. R-3.6.3.nn.pkg). Executeu l’instal·lador i seguiu les instruccions. Per a Linux: Un cop a la pàgina de la CRAN, cliqueu a Download R for Linux. Escolliu la distro de Linux que utilitzeu (probablement Ubuntu). Seguir les intruccions. També podeu instal·lar R mitjançant la terminal i corrent la següent ordre: sudo apt-get install r-base. Des de l’Ubuntu Software Center també podeu descarregar R. 1.2 Què és RStudio? RStudio és un entorn de desenvolupament integrat (integrated developement environment, IDE) per a R. En altres paraules, és una interfície gràfica que inclou una consola per a escriure les ordres, un editor de text que permet evaluar (executar) el codi i escriure els scripts, diverses eines per a la visualització de gràfics, un entorn de treball on es poden veure totes les variables definides, els paquets que s’han carregat, entre molts altres. Per altra banda, també permet crear documents en format Rmarkdown, que mescla markdown amb l’execució de codi en R, encara que també es pot executar codi en Python i Bash. Aquest format és molt útil per a crear informes en HTML o PDF que siguin fàcils d’entendre i que permetin visualitzar el codi utilitzat. De fet, tot aquest curs ha estat generat utilitzant aquest format. Figure 1.2: Interfície gràfica d’RStudio amb una explicació dels quatre panells que té i d’algunes de les opcions que permet. 1.2.1 Instal·la RStudio Per a instal·lar RStudio: Heu d’anar a la web del projecte RStudio i clicar a DOWNLOAD. Un cop aquí, heu de clicar a Download de RStudio Desktop. Si ja heu instal·lat R, podreu passar al punt 2 i descarregar RStudio pel vostre sistema operatiu (veure Figura 3). En cas que volgueu descarregar uns altres instal·ladors, més avall teniu l’apartat All installers, on podeu trobar tots els instal·ladors que necessiteu. Figure 1.3: Pàgina web del projecte RStudio on podeu descarregar l’instal·lador que necessiteu. 1.3 Fes-ho tu! Ara et toca a tu dur a terme tot el que has après en aquesta lliçó. Únicament has d’instal·lar R i RStudio 1.4 Recursos per a l’aprenentatge The R Foundation. The R project for statistical computing. Online aquí. RStudio. RStudio website. Online aquí. Rafael A. Irizarry. Introduction to Data Science: Chapter 1. Online aquí. "],["comencem.html", "Capítol 2 Comencem 2.1 Glossari bàsic 2.2 Comencem a fer servir R i RStudio 2.3 Exercicis. 2.4 Recursos per a l’aprenentatge", " Capítol 2 Comencem En aquesta unitat aprendrem: Conceptes bàsics d’R. Com configurar RStudio. Us bàsic d’R i Rmarkdown. 2.1 Glossari bàsic Abans de començar a utilitzar R i RStudio, s’han de conèixer alguns conceptes bàsics que us anirem mostrant al llarg del curs. Us deixem un petit glossari d’aquest conceptes. Directori: en poques paraules, sinònim de carpeta. Ruta/camí (path): ruta a un fitxer o directori concret, que inclou tots els directoris anteriors i separats per una barra (/). Path absolut: ruta a un fitxer o directori que comença des del disc del sistema. Sol començar amb una barra / (ex. /Users/ieo5089/Desktop/). Path relatiu: ruta a un fitxer o directori que comença des d’una ubicació concreta on el sistema està ubicat actualment, anomenada directori de treball. No sol començar amb una barra (ex. des de Desktop, Adria/Other/ASBTEC/cursos_R/imatges/logo_asbtec.png). Dins el path, podem indicar el directori actual amb un punt (.) o tirar enrere amb dos punts (..), sempre amb la separació la barra entre directoris (ex. des de Desktop, ./Adria/Other/ASBTEC/../../Other/ASBTEC/cursos_R/imatges/logo_asbtec.png). És recomanable no utilitzar espais en blanc o comes en el nom dels directoris o fitxers. Directori de treball (working directory): directori on estem ubicats actualment i on R cercarà les dades. Per defecte, R agafa la carpeta de l’usuari (ex. home) com a tal. La carpeta home es pot especificar mitjançant ~ en un path. Objecte: qualsevol cosa emmagatzemada dins la memòria d’R, ja siguin variables, funcions, etc. Variable: dades que tenim emmagatzemades dins la memòria d’R, ja siguin un número, una paraula, un vector, una matriu de dades, etc. Funció: fragment de codi que tenim emmagatzemat dins un objecte dins la memòria d’R i que podem cridar repetidament, per exemple, la funció sum() que serveix per fer sumes dels nombres a l’interior del parèntesi. Algunes funcions tenen diversos paràmetres que podem canviar. Paquets o llibreries: conjunt de funcions, mètodes i sets de dades. Poden estar integrats dins R o poden haver estat desenvolupats per tercers. En el segon cas, s’hauran d’instal·lar i carregar dins de la sessió actual. Entorn (o ambient) de treball (environment): entorn dins la memòria del sistema on es guarden totes les variables, paquets/llibreries, etc. Si volem utilitzar una funció, llibreria o variable, aquestes les hem de tenir definides dins l’entorn de treball. En cas contrari, R no les detectarà. Evaluar codi: significa executar un fragment de codi, ja sigui una ordre o diverses. En cas de scripts sencers, se sol parlar més d’executar o, a vegades, córrer. També podem dir que cridem una funció. Comentari: text utilitzat per explicar el codi però que no és evaluat. A R (també Python i altres), aquest text està precedit per un coixinet (#). 2.2 Comencem a fer servir R i RStudio 2.2.1 Configurem RStudio Ara que ja tenim R i RStudio instal·lats, només queda configurar-los al nostre gust i aprendre a utilitzar-los. Cal mencionar que, a partir d’aquest punt, absolutament tot el que es dugui a terme en aquest curs es farà dins d’RStudio, tret dels casos que s’indiquin, així que el que hem de fer primer és obrir RStudio. Per a configurar RStudio: Apariència: una de les coses que podem fer, és canviar els colors de RStudio. Com heu vist a la figura 2, els colors són foscos, mentre que, probablement, vosaltres els tindreu clars per defecte. Podeu canviar això: A la barra superior, hem d’anar a Tools&gt;Global options&gt;Appearance Distribució dels panells: la distribució dels panells es pot canviar a la barra superior: Tools&gt;Global options&gt;Pane Layout 2.2.2 Com cridar funcions Cridar una funció significa executar el codi que hi ha dins aquella funció i la podem cridar tantes vegades com volguem. Cal recordar que les funcions, així com la resta de codi, s’han d’evaluar dins la consola d’R, un script o un bloc de codi dins d’un document RMarkdown (dels quals en parlarem més endevant.) Per a cridar una funció, simplement hem d’escriure el seu nom seguit de parèntesis (ex. sum()). A la majoria de les funcions, a dins el parèntesis hi ha el que se’n diuen paràmetres o arguments, que són valors o objectes d’R que se li donen a la funció com a input. En el cas de la funció sum() els arguments són els números que li donem perquè els sumi. La funció sum() entre d’altres, son del paquet base d’R, que ja està integrat dins el mateix llenguatge, així com alguns altres paquets (ex. stats). 2.2.3 Paquets externs Per a cridar funcions de paquets externs, primer haurem de tenir instal·lat (més endevant s’explica com instal·lar paquets de diversos repositoris) el paquet corresponent. Després hem de carregar aquest paquet mitjançant la funció library() o require(). Aquest procés de carregar un paquet només és necessari fer-lo una vegada per sessió. library(paquet) # carreguem el paquet que ens interessa funcio() # cridem la funció que es troba dins un dels paquets que hem carregat anteriorment També podem fer cridar la funció indicant el nom del paquet al mateix temps mitjançant la següent estructura paquet::funcio(), tant si hem carregat el paquet amb anterioritat com si no. Aquest mètode té dos punts a favor molt clars: Evita errors en cas que tinguem dos paquets diferents que tenen dues funcions diferents però que es diuen igual, ja que una funció emmascara l’altra. Per exemple, tenim un paquet anomenat paquet1, el qual té una funció anomenada funcio(), mentre que el paquet paquet2 té una funció diferent amb el mateix nom i tenim els dos paquets carregats. Posem per cas que la funció del paquet paquet1 té prioritat sobre la del paquet paquet2, però nosaltres volem utilitzar la del paquet paquet2, què hem de fer? Doncs simplement hem d’indicar de quin paquet volem fer servir la funció escribint el nom del paquet abans de la funció: paquet2::funcio() library(paquet1) # carreguem el paquet1 library(paquet2) # carreguem el paquet2 funcio() # cridem la funcio() del paquet1 perquè té prioritat paquet2::funcio() # cridem la funcio() del paquet2 indicant el nom del paquet També permet cridar una funció sense carregar el paquet sencer, de manera que ens estalviem temps d’execució i memòria dins d’R. A continuació, es mostra com instal·lar els paquets externs des de diversos repositoris. 2.2.3.1 CRAN Hi ha moltes funcions que es troben a paquets desenvolupats per tercers que s’han d’instal·lar mitjançant la funció install.packages(\"paquet\") en cas que es trobin al CRAN. També podem instal·lar més d’un paquet a la vegada si posem els noms dins un vector. Per exemple, els paquets dplyr, ggplot2 o tidyverse, paquets molt útils que utilitzarem més endevant. install.packages(&quot;dplyr&quot;) # instal·lem un paquet anomenat dplyr install.packages(c(&quot;ggplot2&quot;, &quot;tidyverse&quot;)) # instal·lem diversos paquets mitjançant un vector. 2.2.3.2 Bioconductor Si treballem amb dades biològiques, és probable que la funció que desitgem utilitzar es trobi en un paquet dins del repositori Bioconductor, un repositori de paquets dedicats al tractament de dades biològiques, sobretot genòmiques. Per a instal·lar paquets que es troben dins de Bioconductor, primer necessitarem instal·lar el paquet BiocManager i utilitzar la funció install() dins d’aquest paquet. Una de les funcions que podem instal·lar és GenomicRanges, un paquet molt útil per tractar amb coordenades genòmiques. install.packages(&quot;BiocManager&quot;) # instal·lem BiocManager BiocManager::install(&quot;GenomicRanges&quot;) # cridem la funció install() per a instal·lar un paquet de bioconductor Dins del paquet BiocManager hi ha altres funcions útils com la funció available() que ens permet obtenir una llista dels paquets disponibles per a poder instal·lar des de Bioconductor. BiocManager::available() %&gt;% ## l&#39;operador %&gt;% és una &#39;pipe&#39; del paquet &#39;dplyr&#39;. head() ## la funcio head() serveix per a mostrar la part inicial de les dades. #&gt; [1] &quot;A3&quot; &quot;a4&quot; &quot;a4Base&quot; &quot;a4Classif&quot; &quot;a4Core&quot; &quot;a4Preproc&quot; 2.2.3.3 Altres A vegades, hi ha paquets que no estan a cap dels dos repositoris anteriors, ja sigui perquè es troben en desenvolupament o perquè l’autor ha preferit carregar-lo a una altra plataforma com, per exemple GitHub, un repositori de codi, el qual ara no entrarem a explicar. De fet, hi ha moltíssims paquets interessants a GitHub. Alguns d’ells, com hem comentat, no es troben ni al CRAN ni a Bioconductor, mentre que d’altres sí que s’hi troben, però hi ha una versió en desenvolupament més nova que es troba a GitHub. Així doncs, per a instal·lar un paquet des de GitHub haurem de fer servir una altra funció (n’hi ha de diferents). Encara que normalment, en el mateix repositori de GitHub ja es sol indicar la manera d’instal·lar el paquet, una de les funcions més utilitzades és la funció install_github del paquet devtools o del paquet remotes. devtools::install_github(&quot;repositori&quot;) remotes::install_github(&quot;repositori&quot;) També hi ha altres llocs des d’on podem instal·lar paquets externs, com BitBucket o GitLab, que vindrien a ser el mateix que GitHub. 2.2.4 Us bàsic d’R Amb R podem fer multitud de coses. Aquí veurem una petita introducció d’alguns usos bàsics com operacions matemàtiques senzilles o estadística descriptiva… dels quals en parlarem amb més detall en capítols propers. Definir variables Com hem dit, les variables són objectes d’R que emmagatzemen valors, vectors, etc. Per a definir una variable a R, hem d’escriure el nom que li volem otorgar, seguida de &lt;- o = i el valor o objecte que se li vol assignar (es recomana utilitzar &lt;-, ja que = es pot confondre amb l’operador == que significa comparació). A continuació definirem diverses variables i els assignarem diversos tipus de dades, dels quals en parlarem en detall al capítol 3. valor &lt;- 4 paraula &lt;- &#39;ASBTEC&#39; # les paraules van entre cometes. paraula &lt;- &quot;ASBTEC significa Associació de Biotecnòlegs de Catalunya&quot; vertader &lt;- TRUE vertader &lt;- T # tant TRUE com T són el mateix (en majúscules) fals &lt;- FALSE fals &lt;- F # tant FALSE com F són el mateix (en majúscules) vector_num &lt;- c(10,10,34,67) # un vector amb quatre valors 10, 10, 34, 67 vector_text &lt;- c(&quot;Hola, com estàs?&quot;, &quot;Molt bé!&quot;) # un vector amb elements de &quot;text&quot; Aquestes variables es poden imprimir escribint el seu nom. valor #&gt; [1] 4 paraula #&gt; [1] &quot;ASBTEC significa Associació de Biotecnòlegs de Catalunya&quot; vertader #&gt; [1] TRUE fals #&gt; [1] FALSE vector_num #&gt; [1] 10 10 34 67 vector_text #&gt; [1] &quot;Hola, com estàs?&quot; &quot;Molt bé!&quot; Com podem veure, la variable paraula l’hem definit dues vegades i, en canvi, només ens apareix el segon valor que li hem assignat. Això és perquè R llegeix el codi de dalt a baix i, si volem dues variables diferents, no podem definir-les amb el mateix nom, ja que la segona sobrescriurà la primera. Càlculs senzills De les primeres coses que podem fer amb R és fer càlculs senzills com si es tractés d’una calculadora fent servir operadors matemàtics bàsics: Suma: + Resta: - Multiplicació: * Divisió: / Potència: ** o ^. Mòdul: %%. El mòdul és el residu que queda en una divisió entre nombres enters. Divisió entera: %/%. La divisió entera retorna la part entera del resultat d’una divisió # Suma 9+2 #&gt; [1] 11 # Resta 9-2 #&gt; [1] 7 # Multiplicació 9*2 #&gt; [1] 18 # Divisió 9/2 #&gt; [1] 4.5 # Potència 9**2 #&gt; [1] 81 9^2 #&gt; [1] 81 # Mòdul 9.0 %% 2.0 #&gt; [1] 1 # Divisió entera 9 %/% 2 #&gt; [1] 4 També podem utilitzar diverses funcions bàsiques d’R per realitzar aquest càlculs i molts d’altres. Algunes funcions integrades a R: Suma: sum() Resta: sum() utilitzant nombres negatius Multiplicació: prod() Arrel quadrada: sqrt() Valor absolut: abs() Logaritmes: log(), log10(), log2 … # suma sum(1,2,3,4) #&gt; [1] 10 # resta sum(1,-2, 3) #&gt; [1] 2 # multiplicació prod(1,2,3,4,5) #&gt; [1] 120 # arrel quadrada sqrt(81) #&gt; [1] 9 # valor absolut abs(-10) #&gt; [1] 10 # logarítmes log(x = 100) # per defecte, la base de &#39;log()&#39; és el nombre e, però es pot canviar #&gt; [1] 4.60517 log(x = 100, base = 10) # logaritme en base 10 #&gt; [1] 2 log10(100) # logaritme en base 10 #&gt; [1] 2 log2(4) # logartime en base 2 #&gt; [1] 2 A més, si en comptes de números inserim vectors numèrics com argument, ens retorna el resultat per a tot aquell vector (dels vectors i altres estructures de dades ja en parlarem més endevant, també de matrius i marcs de dades). v &lt;- c(1,2,3,4,5,6,7,8,9,10) #definim el vector i el guardem a l&#39;objecte v sum(v) # ens fa la suma de tots els valors dins el vector. #&gt; [1] 55 log10(v) # ens fa el logaritme de cada valor dins el vector #&gt; [1] 0.0000000 0.3010300 0.4771213 0.6020600 0.6989700 0.7781513 0.8450980 #&gt; [8] 0.9030900 0.9542425 1.0000000 #... Hi ha altres funcions que ens poden ajudar en molts sentits, encara que no són aquest tipus d’operacions poden ser: round(x, digits): ens arrodoneix un número decimal o vector amb nombres decimals x a el número de decimals que li indiquem (digits), el qual pot ser 0. ceiling(x): ens retorna el primer nombre enter més gran que el nombre decimal x que li indiquem. trunc(x): ens tronca la part entera del nombre decimal x que li indiquem. Estadística descriptiva Una de les altres coses que podem fer és estadística descriptiva molt bàsica. Algunes funcions integrades a R: Mitjana: mean() Mediana: median() Desviació estàndard: sd() Variança: var() Miním: min() Màxim: max() Quantils: quantile() Resum general: summary() … v &lt;- c(1,2,3,4,5,5,6,7,8,9,10) #definim el vector i el guardem a l&#39;objecte v mean(v) #&gt; [1] 5.454545 median(v) #&gt; [1] 5 sd(v) #&gt; [1] 2.876235 var(v) #&gt; [1] 8.272727 min(v) #&gt; [1] 1 max(v) #&gt; [1] 10 quantile(v) #&gt; 0% 25% 50% 75% 100% #&gt; 1.0 3.5 5.0 7.5 10.0 summary(v) #&gt; Min. 1st Qu. Median Mean 3rd Qu. Max. #&gt; 1.000 3.500 5.000 5.455 7.500 10.000 #... Altres funcions Mitjançant algunes funcions d’R podem saber diverses informacions sobre el sistema: Informació general del sistema operatiu amb Sys.info(): nom, versió, … Sys.info() #&gt; sysname #&gt; &quot;Darwin&quot; #&gt; release #&gt; &quot;19.6.0&quot; #&gt; version #&gt; &quot;Darwin Kernel Version 19.6.0: Tue Nov 10 00:10:30 PST 2020; root:xnu-6153.141.10~1/RELEASE_X86_64&quot; #&gt; nodename #&gt; &quot;macbookamitjavi.local&quot; #&gt; machine #&gt; &quot;x86_64&quot; #&gt; login #&gt; &quot;root&quot; #&gt; user #&gt; &quot;ieo5089&quot; #&gt; effective_user #&gt; &quot;ieo5089&quot; Informació de la sessió d’R amb sessionInfo(): versió, plataforma, paquets carregats… Això és útil a l’hora de buscar errors, ja que moltes vegades els errors depenen en l’entorn (environment) de treball. sessionInfo() #&gt; R version 4.0.3 (2020-10-10) #&gt; Platform: x86_64-apple-darwin17.0 (64-bit) #&gt; Running under: macOS Catalina 10.15.7 #&gt; #&gt; Matrix products: default #&gt; BLAS: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib #&gt; LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib #&gt; #&gt; locale: #&gt; [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #&gt; #&gt; attached base packages: #&gt; [1] stats graphics grDevices utils datasets methods base #&gt; #&gt; other attached packages: #&gt; [1] scales_1.1.1 forcats_0.5.0 stringr_1.4.0 dplyr_1.0.3 #&gt; [5] purrr_0.3.4 readr_1.4.0 tidyr_1.1.2 tibble_3.0.5 #&gt; [9] ggplot2_3.3.3 tidyverse_1.3.0 #&gt; #&gt; loaded via a namespace (and not attached): #&gt; [1] tidyselect_1.1.0 xfun_0.20 haven_2.3.1 #&gt; [4] colorspace_2.0-0 vctrs_0.3.6 generics_0.1.0 #&gt; [7] htmltools_0.5.1.1 yaml_2.2.1 rlang_0.4.10 #&gt; [10] pillar_1.4.7 glue_1.4.2 withr_2.4.1 #&gt; [13] DBI_1.1.1 dbplyr_2.0.0 modelr_0.1.8 #&gt; [16] readxl_1.3.1 lifecycle_0.2.0 munsell_0.5.0 #&gt; [19] gtable_0.3.0 cellranger_1.1.0 rvest_0.3.6 #&gt; [22] codetools_0.2-18 evaluate_0.14 knitr_1.30 #&gt; [25] fansi_0.4.2 highr_0.8 broom_0.7.3 #&gt; [28] Rcpp_1.0.6 backports_1.2.1 BiocManager_1.30.10 #&gt; [31] jsonlite_1.7.2 fs_1.5.0 hms_1.0.0 #&gt; [34] digest_0.6.27 stringi_1.5.3 bookdown_0.21 #&gt; [37] grid_4.0.3 cli_2.2.0 tools_4.0.3 #&gt; [40] magrittr_2.0.1 crayon_1.3.4 pkgconfig_2.0.3 #&gt; [43] ellipsis_0.3.1 xml2_1.3.2 reprex_0.3.0 #&gt; [46] lubridate_1.7.9.2 assertthat_0.2.1 rmarkdown_2.6 #&gt; [49] httr_1.4.2 rstudioapi_0.13 R6_2.5.0 #&gt; [52] compiler_4.0.3 Data, hora, fus horari… amb Sys.Date(), Sys.time() i Sys.timezone() Sys.Date() # data #&gt; [1] &quot;2021-01-30&quot; Sys.time() # data i hora #&gt; [1] &quot;2021-01-30 21:10:56 CET&quot; Sys.timezone() # fus horari #&gt; [1] &quot;Europe/Madrid&quot; 2.2.5 Establir un directori de treball Per a establir el directori de treball, tenim dues opcions: A la barra superior, anar Session&gt;Set Working Directory i triar l’opció que es vol: To Project Directory: el directori en el que està definit el projecte. Aquesta opció només és útil si es té un projecte d’R obert, cosa que no és necessària, però que és útil en alguns casos. To Source File Location: si treballem amb scripts o altres tipus de fitxers, aquesta opció ens establirà el directori de treball a la ubicació on hi hagi el fitxer guardat. To Files Pane Location: la ubicació on tenim el panell de visualització en el moment d’activar aquesta opció. Choose Directory…: aquesta és l’opció més senzilla ja que ens permet triar molt fàcilment la ubicació on volem establir el directori de treball. La funció setwd() i posant la ruta (entre cometes) al directori/carpeta on vols que R cerqui les dades. Aquesta opció és equivalent a l’última opció de l’apartat anterior. Per exemple: setwd(&quot;./Adria/Other/ASBTEC/cursos_R/&quot;) El directori de treball es pot canviar sempre que es vulgui mitjançant qualsevol de les opcions anteriors. En cas de crear o obrir un projecte d’R, el directori de treball s’establirà en el directori del projecte. 2.2.6 Utilitzar scripts d’R Com ja hem comentat amb anterioritat, un script d’R no és res més que un fitxer de text amb extensió .R que ens permet executar el codi d’R tant a la consola com independentment d’aquesta. A més també el podem utilitzar per a tenir una història de les ordres que hem executat i modificar-les de manera més simple per tal de corregir els errors que ens trobem. Per a crear un script d’R, hem de clicar a la icona de la part superior-esquerra de la pantalla i clicar a R Script. Un cop haguem fet això, ens apareixerà un nou fitxer (ex. Untitled1) en el qual podrem escriure tot el codi que volguem. A més, també podem insertar comentaris mitjançant el coixinet (#). Les línies d’un script que comencin amb aquest caràcter no seran evaluades i ens permetran inserir text que ens ajudi a entendre el que el codi està fent, sobretot si hem de compartir aquest codi. Un exemple de codi que podem posar dins un script és el següent: # això és un comentari i no és executat. setwd(&quot;~&quot;) # amb aquesta funció, canvio el directori de treball al meu &#39;home&#39;. getwd() # amb aquesta funció puc saber quin és el meu directori de treball actual. # aquí podríem inserir més codi, carregar llibreries o definir funcions i variables # però això ho deixearem per a més endevant 2.2.7 Utilitzar documents Rmarkdown Rmarkdown (.Rmd) és un format de fitxer que combina el format R i el format markdown. Això significa que podem crear un document amb extensió .Rmd que ens permetrà escriure tot el text que volguem mitjançant la sintaxis de markdown i, a més, inserir blocs de codi que funcionaran com scripts d’R que poden ser executats independentments els uns dels altres i que mostren el resultat dins el mateix doxument Rmarkdown. De manera opcional, també es poden utilitzar altres llenguatges, com Python i Bash dins de cada bloc de codi, però s’han tenir les dependències necessàries instal·lades i aquest curs no preveu ensenyar-les. Finalment, també es poden convertir (o renderitzar) els documents Rmarkdown a HTML, PDF, Word i altres, cosa que fa que aquest format sigui molt útil per a fer informes (o per aquest curs). A continuació veurem l’ús bàsic dels Rmarkdown. Aquí teniu un petit resum (Cheat sheet) del funcionament d’Rmarkdown. A continuació us en fem una petita introducció. Per a crear un document Rmarkdown: knitr::include_graphics(&quot;assets/CrearRmarkdown.png&quot;) Figure 2.1: Passos per crear un document Rmarkdown: 1) iniciar la creació del document; 2) posar títol al document i crear-lo; 3) Rmarkdown per defecte i algunes de les seves característiques. Clicar a la icona del document amb el signe + de la part superior-esquerra de la pantalla i clicar a R Markdown. Ens apareixerà una nova finestra on podrem posar el títol i autor del document Rmarkdown, així com el format del document que volem crear amb aquest Rmarkdown. Title: títol del document Rmarkdown Author: autor del document Rmarkdown Default Output Format: format del document que voldrem crear a partir del document Rmarkdown. HTML és com una pàgina web, és dinàmica i fàcil d’entendre; per a crear un PDF necessitem LaTeX instal·lat. S’haurà creat un document per defecte, que ens dona unes petites instruccions i ens ajuda a entendre el funcionament dels documents Rmarkdown. Al principi veureum una capçalera entre dos blocs de guions (---). Aquesta capçalera és on insertarem el títol (especificat en el pas 2), l’autor i la data (que són opcionals) i el format del fitxer a crear a partir del document Rmarkdown (és el que hem especificat al pas 2). A la icona de Knit (a dalt), podem A la icona de l’engranatge (a dalt) podem configurar algunes opcions del document Rmarkdown, així com les del document de sortida. Aquestes opcions del document de sortida també les podem indicar a la capçalera, per exemple: output: html_document: # indiquem que volem un document HTML toc: yes # indiquem que volem un índex (toc = &#39;table of contents&#39;) toc_float: yes # indiquem que volem que l&#39;índex sigui flotant toc_depth: 3 # l&#39;índex tindrà els títols fins a dos subtítols (títol, subtítol, subsubtítol) code_folding: hide # indiquem que volem que s&#39;amagui tot el codi. En el document Rmarkdown que es crea per defecte veurem un bloc de codi d’R entre dos blocs de 3 accents oberts i, entre claus, una r , un títol setup i unes opcions include = FALSE. La lletra r indica que el codi que escrivim ha de ser evaluat com a codi d’R (també podríem posar python, bash o res, en cas que no volguessim evaluar el codi però volguéssim indicar que es tracta de codi); el títol no és necessari, però és recomanable; les opcions són molt útils, include = FALSE significa que no volem incloure el bloc (ni els resultats d’aquest) al document final, però sí que volem executar el codi. El primer bloc de codi (setup) és important perquè ens estableix opcions per a tots els blocs de codi i no és recomanable esborrar-lo. Per defecte ens apareix echo = TRUE, que significa que volem que es mostrin els blocs de codi. Podeu trobar una llista més completa d’aquetes opcions pels blocs (chunk options) en el següent enllaç: https://yihui.org/knitr/options/. Sintaxi de markdown El text en format markdown és tot aquell text que no estigui dins de blocs de codi i que, per tant, no serà evaluat com a tal. És similar al format de text dels documents .txt però amb més opcions de format (títols, negreta, cursiva…). Comencem amb la sintaxi de markdown. A continuació teniu algunes instruccions, encara que també podeu mirar la cheat sheet de Rmarkdown: Títols/capçaleres (headers): per als títols de cada apartat útilitarem els coixinets (ex. # Apartat 1) i per a cada subapartat afegirem un coixinet més (ex. ## Subapartat 1.1, ### Subapartat 1.1.1, …). Text: el text normal l’escriurem com si es tractés d’un document de text. Cursiva: el text en cursiva ha de tenir un asterisc (ex. *cursiva* –&gt; cursiva) o guió baix. (ex. _cursiva_ –&gt; cursiva) a cada banda. Negreta: el text en negreta ha de tenir dos asteriscos (ex. **negreta** –&gt; negreta) o guions baixos. (ex. __negreta__ –&gt; cursiva) a cada banda. Subíndex: els subíndex els hem d’escriure amb ~ (ex. ~subíndex~–&gt; subíndex) a cada banda. Superíndex: els superíndex els hem d’escriure amb ^ (ex. ^superíndex^–&gt; superíndex) a cada banda. Text ratllat: per a fer text ratllat, hem d’escriure ~~ a cada costat. Text en format codi: el text amb font de codi (Verbatim) l’hem d’escriure amb un accent obert (`) a cada banda en cas que volguéssim escriure dins la mateixa línea de text o entre blocs de tres accents oberts (```) en cas que volguessim fer un bloc de codi. BlocCodi Codi en R: a Rmarkdown podem escriure codi en R dins de la mateixa línia com codi normal però amb una r derrere el primer ` o en un bloc a part, mitjançant els tres accents: BlocCodiR Hipervincles: per a inserir hipervincles hem d’escriure la paraula que farà de vincle entre claudàtors [] seguida de la ruta/path (URL o path al fitxer dins el sistema) entre parèntesis () (ex. [ASBTEC](https://asbtec.org) –&gt; ASBTEC). Imatges: per a inserir imatges (JPEG, PNG…) hem de fer servir la mateixa sintàxi que amb els hipervincles, però amb un signe d’exclamació ! a davant (![text](ruta_de_la_imatge_dins_el_sistema_o_URL_de_la_imatge)): ![LogoAsbtec](https://asbtec.org/wp-content/uploads/2020/05/cropped-logo2.jpg) Per a inserir imatges també podem fer-ho mitjançant algunes funcions d’R com knitr::include_graphics() Línies horitzontals (hrules): Per a fer línies horitzontals hem de fer servir ---, *** o ___. Per exemple: Equacions: per escriure en text en format d’equació, hem d’utilitzar els blocs de $ per a fer-ho en una mateixa línea o $$ per a fer un bloc separat i utilitzar llenguatge de làtex. També podem fer servir lletres gregues i tot tipus d’operadors matemàtics: aquí teniu una llista amb tot tipus d’equacions. Per exemple: $A = \\pi * r^2$ –&gt; \\(A = \\pi * r^2\\) I utilitzant $$, per exemple, la següent funció $$\\sum_{i=1}^{k} x_{i}$$ dona lloc a \\[\\sum_{i=1}^{k} x_{i}\\] Llistes: a markdown es poden fer diversos tipus de llistes: ordenades (numèriques) i no ordenades. Llistes no ordenades: per a fer una llista no ordenada farem servir l’asterisc * al principi de cada objecte de la llista. Per exemple: * Objecte 1 Llistes ordenades: per a fer llistes ordenades ho podem fer amb números, simplement indicant 1., 2.… al principi de cada objecte de la llista, per exemple: 1. Objecte 1 2. Objecte 2 Subllistes: per a fer llistes dins una altra llista, hem de posar una identació (tabulació o quatre espais) i utilitzar + al principi de cada element de la subllista. Per exemple: * element 1: + element 1.1 + element 1.2 Taules: amb Markdown també podem fer taules (treballem amb RMarkdown també les podem fer creant una matriu o data frame amb R i imprimint-lo al mateix document). Per a construir la taula, només hem d’utilitzar guions (-) com a línees horiziontals per a separar el títol de les columnes, barres verticals (|) com a línees verticals per a fer les columnes i dos punts (:) per a alinear el text. Per exemple: | Per defecte | Alineació a la dreta | Alineació a l&#39;esquerra | Centrat | | ----------- | -------------------: | :--------------------- | :-----: | | ASBTEC | No cal mantenir l&#39;alineació de les barres verticals per a poder fer la taula, encara que és desitjable per tal de fer el document més llegible | Esquerra | Mig | 13.466 | Biotecnologia | Inicia&#39;t a R | 2021 | Per defecte Alineació a la dreta Alineació a l’esquerra Centrat ASBTEC No cal mantenir l’alineació de les barres verticals per a poder fer la taula encara que és desitjable per tal de fer el document més llegible Esquerra Mig 13.466 Biotecnologia Inicia’t a R 2021 Hi ha moltes més coses que es poden fer amb Markdown i R Markdown, però aquí només us n’hem fet una petita introducció. Altres llenguatges A part de la sintàxis específica (mirar cheat sheet d’Rmarkdown), dins un document Rmarkdown podem utilitzar llenguatge LaTeX, en cas que volguem convertir el document en PDF, i HTML en cas que volguem convertir el document a HTML, entre d’altres. També podem utilitzar (i crear) plantilles de LaTeX, pandoc… i així obtindrem un document més organitzat. En aquest curs no s’ensenyarà res d’això, però si voleu aprendre’n més, podeu fer un cop d’ull a aquest llibre. 2.2.8 Crear un projecte d’R En alguns casos pot ser molt útil crear un projecte d’R en comptes de treballar sense projecte. En cas de principiants no és necessari, però crear un projecte d’R ens pot ser molt útil per a: Tenir tot el codi i els fitxers relacionat amb un projecte en una mateixa ubicació. Poder controlar i compartir el vostre codi més fàcilment mitjançant repositoris de git. Aquesta opció és més avançada. Per a quan volguem fer pàgines web (encara que siguin locals). … Per a crear un nou projecte d’R (Rproject), s’han de seguir els passos esmentats a continuació: Clicar al botó de la part superior-dreta on hi diu Project i clicar a New Project. En cas de tenir un projecte obert, en comptes de Project, a la part superior-dreta hi hagi el nom del projecte en qüestió. Si RStudio ens demana de guardar alguns fitxers, indicar si volem guardar-los o no i clicar a Don’t Save o Save/Save Selected. Escollir si volem crear un nou directori pel projecte o si el volem posar a un directori ja existent. És recomanable crear nou directori. Segons els paquets i llibreries que tinguem instal·lats, ens apareixaran diversos tipus de projectes per a crear. El que apareix sempre és New Project que ve a ser el projecte normal. Indicar del directori que contindrà el projecte del i i la ubicació d’aquest directori. Opcionalment, podeu indicar si en el projecte voleu crear un repositori de git (GitHub, GitLab o BitBucket), però aquesta opció no és recomanable per aquelles persones que no estiguin habituades a utilitzar git. Finalment, veureu com RStudio us crea un nou directori amb diversos fitxers a dins. El tipus de projecte que hem indicat al punt 4 (New Project), ens generarà un fitxer nom_projecte.Rproj on nom_projecte és el nom que li hem donat al nostre projecte. Altres tipus de projectes ens poden altres fitxers i carpetes, però no en parlarem en aquest capítol. Sempre que creeu un nou projecte o l’obriu mitjançant el fitxer nom_projecte.Rproj, aquest us apareixerà a una llista de projectes dins el menú Project que hem comentat al pas 1, de manera que podeu accedir a diversos projectes de manera molt ràpida i, fins i tot, obrir-los a sessions d’RStudio (per tant, entorns de treball) independents. 2.3 Exercicis. Exercici 1 a) Obre RStudio i crea un projecte anomenat curs_R_asbtec en un nou directori. D’aquesta manera podràs accedir fàcilment al curs cada vegada que obris RStudio. b) Crea un script d’R o un document Rmd i guarda’l com a curs_asbtec.R (probablement sigui més útil un Rmd). D’aquesta manera podràs guardar els apunts/exercicis que facis en el curs (pots fer-ne un de sol per a tot el curs o diversos per a cada capítol, i separar apunts i exercicis o fer-ho tot junt). c) Insereix un comentari (en el cas de l’script) o un títol (en el cas del document Rmd) amb # indicant el títol del curs, i els subtítols conseqüents (##…) indicant els títols dels capítols, etc. Nota de l’exerici 1: els següents exercicis els pots fer dins el document creat en aquest exercici 1 Exercici 2 Defineix una variable hola a la qual assignaràs la salutació ‘Hola, món!’ Després imprimeix aquesta variable Exercici 3 Escriu les funcions corresponents i instal·la els paquets seguents (la majoria es troben al CRAN, encara que algun d’ells es troba a Biocondctor): BiocManager: per a instal·lar paquets de Bioconductor. ^*obligatori^ rmarkdown: ens permetrà utilitzar algunes funcions dels documents RMarkdown. ^*obligatori^ dplyr: molt útil per a tractar dades i modificar taules. També accessible instal·lant el paquet tidyverse. ^*obligatori^ ggplot2: molt útil per a visualitzar dades i fer gràfics. També accessible instal·lant el paquet tidyverse. ^*obligatori^ GenomicRanges: molt útil per a tractar amb coordenades genòmiques. Biostrings: molt útil per a tractar amb seqüències d’ADN, ARN, proteïnes… Nota de l’exerici 3: és possible que us apareixin preguntes a la consola com: Update all/some/none? [a/s/n]: aquesta pregunta significa si voleu actualitzar paquets ja instal·lats (a = all, s = some, n= none). Do you want to install from sources the packages which need compilation? (Yes/no/cancel): aquesta pregunta és per instal·lar paquets en els quals depèn el paquet que voleu instal·lar i que necessiten compilació. En teoria no us hauria d’apareixer, però si us apareix i no teniu el programari requerit per a compilar, pregunteu o no instal·leu el paquet en qüestió. Exercici 4 a) Juga amb els operadors matemàtics (ex. +,-). b) Juga amb les funcions d’operacions matemàtiques (ex. sum()…). c) Juga amb les funcions d’estadística descriptiva (ex. mean()…). Exercici 5 Utilitza la següent línia de codi v &lt;- c(1,2,3,4,5,6,7,8,9,10) per a definir el vector v i fes el mateix que a l’exercici 4, però amb el vector v. 2.4 Recursos per a l’aprenentatge Rafael A. Irizarry. Introduction to Data Science: Chapter 1. Online aquí. RStudio. Rmarkdown cheat sheet. Online aquí. Yihui Xie, J. J. Allaire, Garrett Grolemund R Markdown: The Definitive Guide. Online aquí. Randall Pruim. Mathematics in R Markdown. Online aquí "],["solucions.html", "Solucions Capítol 1. Introduccio Capítol 2. Comencem", " Solucions Capítol 1. Introduccio Capítol 2. Comencem Exercici 1. a) Seguir les instruccions del capítol. b) Seguir les instruccions del capítol. Es pot fer un script o un document RMarkdown, encara que és més recomanable el segon perquè permet escriure text sense format de codi que és més fàcil per explicar i entendre el que es fa. c) L’ideal seria l’estructura següent: Script: # Cursos ASBTEC - Inicia&#39;t a R ## Capítol 1. ## Capítol 2. ### ... RMarkdown: en el cas d’RMarkdown tenim l’avantatge de la capçalera YAML que ens permet posar títol, autor, data… en el document que volem crear, per tant, el títol del curs no és necessari posar-lo en un comentari. Així doncs l’estructura ideal seria la següent (encara que podeu crear la que vosaltres volgueu): --- title: &quot;Cursos ASBTEC - Inicia&#39;t a R author: &quot;opcional&quot; date: &quot;opcional&quot; output: html_document --- # Capítol 1 Apunts... # Capítol 2. Apunts... ## Exercicis: ### Exercici 1. ... Exercici 2. # Definim la variable &#39;hola&#39;. El text ha d&#39;anar entre cometes! hola &lt;- &#39;Hola, món!&#39; # Imprimim la variable hola # escrivint-la. #&gt; [1] &quot;Hola, món!&quot; print(hola) # utilitzant la funció print #&gt; [1] &quot;Hola, món!&quot; Exercici 3. install.packages(&quot;BiocManager&quot;) ##BiocManager ens serveix per instal·lar paquets de bioconductor install.packages(&quot;rmarkdown&quot;) install.packages(&quot;dplyr&quot;) install.packages(&quot;ggplot2&quot;) ## també podem instal·lar el paquet tidyverse mitjançant &#39;install.packages(&quot;tidyverse&quot;)&#39; ## install.packages(&quot;tidyverse&quot;) ## instal·lant aquest paquet, ja instal·lem &#39;dplyr&#39;, &#39;ggplot2&#39; i altres paquets. BiocManager::install(&quot;GenomicRanges&quot;) BiocManager::install(&quot;Biostrings&quot;) Fem servir install.packages() per a paquets que es troben al CRAN i BiocManager::install() per a paquets que es troben a Bioconductor. Noteu que a l’hora de fer servir la funció BiocManager::install(), no només utilitzem el nom de la funció install(), sinó que també indiquem el nom del paquet BiocManager i ::. D’aquesta manera evitem carregar tot el paquet mitjançant library(BiocManager), ja que aquesta funció l’hem de fer servir pocs cops. Exercici 4. Exercici lliure, ja que l’únic objectiu és veure com funcionen els operadors i les funcions explicades. 2.4.0.1 a) 1+2+3+4 # suma #&gt; [1] 10 1-5 # resta #&gt; [1] -4 5*5 # multiplicació #&gt; [1] 25 5/5 # divisó #&gt; [1] 1 5**5 # potència #&gt; [1] 3125 10 %% 3 # mòdul #&gt; [1] 1 10 %/% 3 # divisió entera #&gt; [1] 3 Exercici 5. Exercici lliure, ja que l’únic objectiu és veure com funcionen els operadors i les funcions explicades. # definim el vector amb la funció c(). v &lt;- c(1,2,3,4,5,6,7,8,9,10) 2.4.0.2 a) v+v # suma #&gt; [1] 2 4 6 8 10 12 14 16 18 20 v-v # resta #&gt; [1] 0 0 0 0 0 0 0 0 0 0 v*v # multiplicació #&gt; [1] 1 4 9 16 25 36 49 64 81 100 v/v # divisió #&gt; [1] 1 1 1 1 1 1 1 1 1 1 Veiem com cada operació es fa entre cada element del vector. 2.4.0.3 b) sum(v,v) #&gt; [1] 110 sum(v) #&gt; [1] 55 #... sqrt(v) #&gt; [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751 2.828427 #&gt; [9] 3.000000 3.162278 Amb algunes funcions com sum(), l’operació agafa tots els elements del vector, independentment de quantes vegades es repeteix el vector. Amb altres funcions com sqrt(), l’operació es fa a cada element del vector per separat. 2.4.0.4 c) mean(v) #&gt; [1] 5.5 var(v) #&gt; [1] 9.166667 # ... "]]
